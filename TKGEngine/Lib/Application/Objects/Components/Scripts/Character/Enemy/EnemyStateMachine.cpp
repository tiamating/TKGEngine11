#include "EnemyStateMachine.h"

REGISTERCOMPONENT(TKGEngine::EnemyStateMachine);

namespace TKGEngine
{
	/////////////////////////////////////////////////////////////////////////
	// 実体生成時に呼び出される
	/////////////////////////////////////////////////////////////////////////
	void EnemyStateMachine::Awake()
	{
		// 更新は各ステートの後、移動コントローラの前
		Priority(8);
	}

	/////////////////////////////////////////////////////////////////////////
	// Updateが呼ばれる前に一度だけ呼び出される
	/////////////////////////////////////////////////////////////////////////
	void EnemyStateMachine::Start()
	{
		// 初期ステートのセット
		SetState(static_cast<int>(EnemyState::Action));
	}

	/////////////////////////////////////////////////////////////////////////
	// 毎フレーム呼び出される
	/////////////////////////////////////////////////////////////////////////
	void EnemyStateMachine::Update()
	{
		// 現在のステートの処理を実行
		m_state_pool.at(m_current_state)->BeforeExecute();
		m_state_pool.at(m_current_state)->Execute();
		m_state_pool.at(m_current_state)->AfterExecute();
	}



	/////////////////////////////////////////////////////////////////////////
	// GUI設定
	/////////////////////////////////////////////////////////////////////////
#ifdef USE_IMGUI
	void EnemyStateMachine::OnGUI()
	{
	}
#endif
}
